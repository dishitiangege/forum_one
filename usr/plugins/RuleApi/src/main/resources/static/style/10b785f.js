(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{463:function(l,e,o){"use strict";o.r(e);var t={layout:"layout",head:function(){return{title:"用户参数设置"}},data:function(){return{key:"",form:{webinfoUploadUrl:"",localPath:"",uploadType:"local",uploadLevel:"0",uploadPicMax:0,uploadMediaMax:0,uploadFilesMax:0}}},beforeDestroy:function(){},created:function(){},mounted:function(){var l=this;localStorage.getItem("webkey")?l.key=localStorage.getItem("webkey"):(l.$message({message:"认证失效！",type:"error"}),l.$router.push({path:"/"})),l.getConfig()},methods:{save:function(){var l=this,e=l.form,o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),data={webkey:l.key,params:JSON.stringify(e)};l.$axios.$post(l.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(e){o.close(),1==e.code?(l.$message({message:e.msg,type:"success"}),l.getConfig()):l.$message({message:e.msg,type:"error"})})).catch((function(e){o.close(),console.log(e),l.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var l=this,data={webkey:l.key};l.$axios.$post(l.$api.getApiConfig(),this.qs.stringify(data)).then((function(e){1==e.code&&(l.form.uploadType=e.data.uploadType,l.form.webinfoUploadUrl=e.data.webinfoUploadUrl,e.data.uploadLevel&&(l.form.uploadLevel=e.data.uploadLevel+""),l.form.localPath=e.data.localPath,l.form.uploadPicMax=e.data.uploadPicMax,l.form.uploadMediaMax=e.data.uploadMediaMax,l.form.uploadFilesMax=e.data.uploadFilesMax)})).catch((function(e){console.log(e),l.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=o(26),component=Object(r.a)(t,(function(){var l=this,e=l._self._c;return e("div",{staticClass:"page-container"},[e("el-row",{attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"data-box"},[e("div",{staticClass:"page-title"},[e("h4",[l._v("上传参数设置")]),l._v(" "),e("p",[l._v("在这里设置上传通道，部分上传方式的访问域名")])]),l._v(" "),e("div",{staticClass:"page-form"},[e("el-form",{ref:"form",attrs:{model:l.form,"label-position":"top","label-width":"80px"}},[e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("上传通道"),e("span",[l._v("除选择的外，其它通道都将关闭")])]),l._v(" "),e("el-select",{attrs:{placeholder:"请选择上传通道"},model:{value:l.form.uploadType,callback:function(e){l.$set(l.form,"uploadType",e)},expression:"form.uploadType"}},[e("el-option",{attrs:{label:"本地上传",value:"local"}}),l._v(" "),e("el-option",{attrs:{label:"腾讯云COS",value:"cos"}}),l._v(" "),e("el-option",{attrs:{label:"阿里云OSS",value:"oss"}}),l._v(" "),e("el-option",{attrs:{label:"七牛存储",value:"qiniu"}}),l._v(" "),e("el-option",{attrs:{label:"远程FTP",value:"ftp"}})],1)],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("文件上传限制")]),l._v(" "),e("el-select",{attrs:{placeholder:"请选择评论审核等级"},model:{value:l.form.uploadLevel,callback:function(e){l.$set(l.form,"uploadLevel",e)},expression:"form.uploadLevel"}},[e("el-option",{attrs:{label:"关闭文件上传",value:"1"}}),l._v(" "),e("el-option",{attrs:{label:"图片上传",value:"0"}}),l._v(" "),e("el-option",{attrs:{label:"图片和视频上传",value:"2"}}),l._v(" "),e("el-option",{attrs:{label:"不限制类型",value:"3"}})],1)],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("本地&ftp图片访问地址"),e("span",[l._v("本地上传接口或者FTP上传接口的访问地址")])]),l._v(" "),e("el-input",{attrs:{placeholder:"请输入本地图片访问地址"},model:{value:l.form.webinfoUploadUrl,callback:function(e){l.$set(l.form,"webinfoUploadUrl",e)},expression:"form.webinfoUploadUrl"}})],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("本地存储地址"),e("span",[l._v("可不填，不填为默认路径/opt/files/static，填写后即为填写地址")])]),l._v(" "),e("el-input",{attrs:{placeholder:"请输入本地图片访问地址"},model:{value:l.form.localPath,callback:function(e){l.$set(l.form,"localPath",e)},expression:"form.localPath"}})],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("图片最大上传大小"),e("span",[l._v("单位MB，只允许整数")])]),l._v(" "),e("el-input",{attrs:{type:"number",placeholder:"请输入图片最大上传大小"},model:{value:l.form.uploadPicMax,callback:function(e){l.$set(l.form,"uploadPicMax",e)},expression:"form.uploadPicMax"}})],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("媒体最大上传大小"),e("span",[l._v("单位MB，只允许整数")])]),l._v(" "),e("el-input",{attrs:{type:"number",placeholder:"请输入媒体最大上传大小"},model:{value:l.form.uploadMediaMax,callback:function(e){l.$set(l.form,"uploadMediaMax",e)},expression:"form.uploadMediaMax"}})],1),l._v(" "),e("el-form-item",[e("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[l._v("其他文件最大上传大小"),e("span",[l._v("单位MB，只允许整数")])]),l._v(" "),e("el-input",{attrs:{type:"number",placeholder:"请输入其他文件最大上传大小"},model:{value:l.form.uploadFilesMax,callback:function(e){l.$set(l.form,"uploadFilesMax",e)},expression:"form.uploadFilesMax"}})],1),l._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return l.save()}}},[l._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);