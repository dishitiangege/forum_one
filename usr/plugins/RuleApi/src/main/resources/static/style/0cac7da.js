(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{467:function(e,o,t){"use strict";t.r(o);var l={layout:"layout",head:function(){return{title:"短信配置"}},data:function(){return{key:"",form:{codeAccessKeyId:"",codeAccessKeySecret:"",codeEndpoint:"",codeTemplate:"",codeSignName:"",isPhone:!1,smsType:"0",smsbaoUsername:"",smsbaoApikey:"",smsbaoTemplate:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,o=e.form;e.form.isPhone,o.isPhone;var data={webkey:e.key,params:JSON.stringify(o)},t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(o){t.close(),1==o.code?(e.$message({message:o.msg,type:"success"}),e.getConfig()):e.$message({message:o.msg,type:"error"})})).catch((function(o){t.close(),console.log(o),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,data={webkey:e.key};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(o){1==o.code&&(e.form.codeAccessKeyId=o.data.codeAccessKeyId,e.form.codeAccessKeySecret=o.data.codeAccessKeySecret,e.form.codeEndpoint=o.data.codeEndpoint,e.form.codeTemplate=o.data.codeTemplate,e.form.smsType=o.data.smsType+"",e.form.smsbaoUsername=o.data.smsbaoUsername,e.form.smsbaoApikey=o.data.smsbaoApikey,e.form.smsbaoTemplate=o.data.smsbaoTemplate,e.form.codeSignName=o.data.codeSignName,1==o.data.isPhone?e.form.isPhone=!0:e.form.isPhone=!1)})).catch((function(o){console.log(o),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=t(26),component=Object(r.a)(l,(function(){var e=this,o=e._self._c;return o("div",{staticClass:"page-container"},[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"data-box"},[o("div",{staticClass:"page-title"},[o("h4",[e._v("短信配置")]),e._v(" "),o("p",[e._v("目前采用阿里云短信，直接前往阿里云官方开通短信服务即可。参考文档："),o("a",{attrs:{href:"https://developer.aliyun.com/article/252987",target:"_blank"}},[e._v("立即前往")])])]),e._v(" "),o("div",{staticClass:"page-form"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("是否开启手机号"),o("span",{staticClass:"text-gray"},[e._v("开启后，将新增手机号相关功能")])]),e._v(" "),o("el-switch",{model:{value:e.form.isPhone,callback:function(o){e.$set(e.form,"isPhone",o)},expression:"form.isPhone"}})],1),e._v(" "),o("el-form-item",[o("el-select",{attrs:{placeholder:"短信服务"},model:{value:e.form.smsType,callback:function(o){e.$set(e.form,"smsType",o)},expression:"form.smsType"}},[o("el-option",{attrs:{label:"阿里云",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"短信宝",value:"1"}})],1)],1),e._v(" "),0==e.form.smsType?[o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信AccessKeyId")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入阿里云短信AccessKeyId"},model:{value:e.form.codeAccessKeyId,callback:function(o){e.$set(e.form,"codeAccessKeyId",o)},expression:"form.codeAccessKeyId"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信AccessKeySecret")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入阿里云短信AccessKeySecret"},model:{value:e.form.codeAccessKeySecret,callback:function(o){e.$set(e.form,"codeAccessKeySecret",o)},expression:"form.codeAccessKeySecret"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信请求地址")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入阿里云短信请求地址"},model:{value:e.form.codeEndpoint,callback:function(o){e.$set(e.form,"codeEndpoint",o)},expression:"form.codeEndpoint"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信模板")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入阿里云短信模板ID"},model:{value:e.form.codeTemplate,callback:function(o){e.$set(e.form,"codeTemplate",o)},expression:"form.codeTemplate"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信签名")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入阿里云短信签名"},model:{value:e.form.codeSignName,callback:function(o){e.$set(e.form,"codeSignName",o)},expression:"form.codeSignName"}})],1)]:e._e(),e._v(" "),1==e.form.smsType?[o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Username")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入短信宝Username"},model:{value:e.form.smsbaoUsername,callback:function(o){e.$set(e.form,"smsbaoUsername",o)},expression:"form.smsbaoUsername"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Apikey")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入短信宝Apikey"},model:{value:e.form.smsbaoApikey,callback:function(o){e.$set(e.form,"smsbaoApikey",o)},expression:"form.smsbaoApikey"}})],1),e._v(" "),o("el-form-item",[o("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Template")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入短信宝Template"},model:{value:e.form.smsbaoTemplate,callback:function(o){e.$set(e.form,"smsbaoTemplate",o)},expression:"form.smsbaoTemplate"}})],1)]:e._e(),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.save()}}},[e._v("保存设置")])],1)],2)],1)])])],1)],1)}),[],!1,null,null,null);o.default=component.exports}}]);