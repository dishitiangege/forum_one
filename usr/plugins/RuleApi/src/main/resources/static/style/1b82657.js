(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{456:function(e,t,o){"use strict";o.r(t);var l={layout:"layout",head:function(){return{title:"微信支付配置"}},data:function(){return{key:"",form:{wxpayAppId:"",wxpayMchId:"",mchSerialNo:"",wxpayKey:"",mchApiV3Key:"",wxpayNotifyUrl:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t=e.form,data={webkey:e.key,params:JSON.stringify(t)},o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){o.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):e.$message({message:t.msg,type:"error"})})).catch((function(t){o.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,data={webkey:e.key};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code&&(e.form.wxpayAppId=t.data.wxpayAppId,e.form.wxpayMchId=t.data.wxpayMchId,e.form.mchSerialNo=t.data.mchSerialNo,e.form.wxpayKey=t.data.wxpayKey,e.form.mchApiV3Key=t.data.mchApiV3Key,e.form.wxpayNotifyUrl=t.data.wxpayNotifyUrl)})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=o(26),component=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("微信支付配置")]),e._v(" "),t("p",[e._v("微信支付是微信官方提供的支付接口，目前采用Native模式生成二维码并唤醒微信，"),t("a",{attrs:{href:"https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_7_2.shtml",target:"_blank"}},[e._v("官方文档")])])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("公众号APP Id")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入APP ID"},model:{value:e.form.wxpayAppId,callback:function(t){e.$set(e.form,"wxpayAppId",t)},expression:"form.wxpayAppId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("商户号")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入商户号"},model:{value:e.form.wxpayMchId,callback:function(t){e.$set(e.form,"wxpayMchId",t)},expression:"form.wxpayMchId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("商户证书序列号")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入商户证书序列号"},model:{value:e.form.mchSerialNo,callback:function(t){e.$set(e.form,"mchSerialNo",t)},expression:"form.mchSerialNo"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("支付密钥")]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入支付密钥，证书的***key.pem文件内容"},model:{value:e.form.wxpayKey,callback:function(t){e.$set(e.form,"wxpayKey",t)},expression:"form.wxpayKey"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("API3私钥")]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入API3私钥"},model:{value:e.form.mchApiV3Key,callback:function(t){e.$set(e.form,"mchApiV3Key",t)},expression:"form.mchApiV3Key"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("回调地址"),t("span",[e._v("范例：http://127.0.0.1:8081/pay/wxPayNotify 请将127.0.0.1:8081部分替换为自己的API域名，需要注意区分https和http")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入回调地址"},model:{value:e.form.wxpayNotifyUrl,callback:function(t){e.$set(e.form,"wxpayNotifyUrl",t)},expression:"form.wxpayNotifyUrl"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);